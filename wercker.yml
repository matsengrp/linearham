box: debian:stretch

build:
    steps:
        - install-packages:
            packages: autoconf build-essential cmake flex git libgsl-dev scons libtool
              #autoconf bison libblas-dev build-essential cmake curl flex git libgsl-dev scons libtool
        - script:
            name: initialize git submodules
            code: |
                git submodule update --init --recursive
        - script:
            name: build
            code: scons
        - script:
            name: test
            code: _build/test/test

    after-steps:
        - slack-notifier:
            url: $SLACK_URL
            channel: bcell
            username: linearham build

# deploy:
#     steps:
#         - install-packages:
#             packages: curl doxygen
#         - script:
#             name: build docs
#             code: doxygen Doxyfile
#         - ematsen/gh-pages:
#             token: $GITHUB_TOKEN
#             repo: matsengrp/linearham
#             path: html
#
#     after-steps:
#         - slack-notifier:
#             url: $SLACK_URL
#             channel: bcell
#             username: linearham build docs
